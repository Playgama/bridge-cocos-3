<html>
    <head>
        <link rel="icon" href="./favicon.ico" />
        <meta charset="utf-8" />
        <title>Cocos Creator | <%= projectName %></title>
        <meta
            name="viewport"
            content="width=device-width,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1,minimal-ui=true"
        />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="full-screen" content="yes" />
        <meta name="screen-orientation" content="portrait" />
        <meta name="x5-fullscreen" content="true" />
        <meta name="360-fullscreen" content="true" />
        <meta name="renderer" content="webkit" />
        <meta name="force-rendering" content="webkit" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

        <script src="./playgama-bridge.js"></script>

        <link rel="stylesheet" type="text/css" href="<%= cssUrl %>"/>

       
    </head>
    <body>
      </script>
      <div id="GameDiv">
        <div id="Cocos3dGameContainer">
          <canvas id="GameCanvas" oncontextmenu="event.preventDefault()" tabindex="0"></canvas>
        </div>
      </div>
        <!-- Polyfills bundle -->
        <script src="src/polyfills.bundle.js" charset="utf-8"></script>

        <!-- SystemJS support -->
        <script src="src/system.bundle.js" charset="utf-8"></script>

        <!-- Import map -->
        <script src="src/import-map.json" type="systemjs-importmap" charset="utf-8"></script>

        <script>
          function loadGame() {
            System.import('./index.js')
              .then(() => console.log('✅ Game started'))
              .catch(err => console.error('❌ Game failed to load:', err));
          }
        
          function waitForSystemThenLoadGame() {
            if (typeof System !== 'undefined' && typeof System.import === 'function') {
              loadGame();
            } else {
              console.log('⏳ Waiting for SystemJS to be ready...');
              setTimeout(waitForSystemThenLoadGame, 50);
            }
          }
        
          if (typeof bridge !== 'undefined') {
            bridge.initialize()
              .then(() => {
                console.log('✅ Bridge initialized');
                waitForSystemThenLoadGame();
              })
              .catch(() => {
                console.warn('⚠️ Bridge init failed or adblock active, loading game anyway');
                waitForSystemThenLoadGame();
              });
          } else {
            console.error('❌ bridge is not defined – maybe blocked or failed to load');
          }
          
        </script>


    </body>
</html>
